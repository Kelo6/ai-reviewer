<!-- SCMé…ç½®åˆ—è¡¨ç‰‡æ®µ -->
<div th:fragment="scm-config-list">
    <!-- æˆåŠŸæ¶ˆæ¯ -->
    <div th:if="${success}" class="alert alert-success">
        <span th:text="${success}">æˆåŠŸæ¶ˆæ¯</span>
    </div>
    
    <!-- é”™è¯¯æ¶ˆæ¯ -->
    <div th:if="${error}" class="alert alert-error">
        <span th:text="${error}">é”™è¯¯æ¶ˆæ¯</span>
    </div>
    
    <div th:each="config : ${scmConfigs}" class="provider-item"
         th:attr="data-provider=${config.provider}"
         hx-get="/config/scm/{provider}/form"
         th:hx-vals="'provider':${config.provider}"
         hx-target="#config-form"
         onclick="document.querySelectorAll('.provider-item').forEach(el => el.classList.remove('active')); this.classList.add('active');">
        
        <div class="provider-info">
            <div class="provider-icon" th:classappend="${config.provider}">
                <span th:switch="${config.provider}">
                    <span th:case="'github'">ğŸ™</span>
                    <span th:case="'gitlab'">ğŸ¦Š</span>
                    <span th:case="'bitbucket'">âš¡</span>
                    <span th:case="'gitea'">ğŸŒ²</span>
                    <span th:case="'custom-git'">ğŸ”§</span>
                    <span th:case="*">ğŸ“</span>
                </span>
            </div>
            
            <div>
                <div style="font-weight: 500;" th:text="${config.displayName}">GitHub</div>
                <div style="font-size: 0.75rem; color: #6b7280;" th:text="${config.provider}">github</div>
            </div>
        </div>
        
        <div style="display: flex; align-items: center; gap: 0.5rem;">
            <!-- çŠ¶æ€å¾½ç«  -->
            <span class="status-badge" 
                  th:classappend="'status-' + ${config.status}"
                  th:text="${config.statusMessage}"
                  th:title="${config.statusMessage}">
                æœªé…ç½®
            </span>
            
            <!-- å¯ç”¨/ç¦ç”¨å¼€å…³ -->
            <label style="display: flex; align-items: center; cursor: pointer; margin: 0;">
                <input type="checkbox" 
                       th:checked="${config.enabled}"
                       th:onchange="'toggleProvider(\'' + ${config.provider} + '\')'"
                       style="margin-right: 0.25rem;">
                <span style="font-size: 0.75rem; color: #6b7280;">å¯ç”¨</span>
            </label>
        </div>
    </div>
    
    <!-- å¦‚æœæ²¡æœ‰é…ç½® -->
    <div th:if="${#lists.isEmpty(scmConfigs)}" 
         style="text-align: center; padding: 2rem; color: #6b7280;">
        <p>æš‚æ— é…ç½®</p>
    </div>
</div>

<script>
    // é¡µé¢åŠ è½½åè§¦å‘ç¬¬ä¸€ä¸ªé…ç½®é¡¹çš„é€‰æ‹©
    document.addEventListener('DOMContentLoaded', function() {
        const firstProvider = document.querySelector('.provider-item');
        if (firstProvider && !document.querySelector('.provider-item.active')) {
            firstProvider.click();
        }
    });
</script>
