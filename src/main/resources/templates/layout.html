<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${pageTitle != null ? pageTitle + ' - AI Reviewer' : 'AI Reviewer'}">AI Reviewer</title>
    
    <!-- 样式文件 -->
    <link rel="stylesheet" th:href="@{/css/main.css}">
    
    <!-- HTMX -->
    <script src="https://unpkg.com/htmx.org@1.9.12"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.min.js"></script>
    
    <!-- 自定义脚本 -->
    <script th:src="@{/js/charts.js}"></script>
    
    <meta name="htmx-config" content='{"globalViewTransitions":true}'>
</head>
<body>
    <!-- 主导航栏 -->
    <div th:replace="~{fragments/navigation :: main-navigation}"></div>

    <!-- 主要内容区域 -->
    <main class="main-content">
        <div class="container">
            <!-- 面包屑导航 -->
            <div th:if="${breadcrumbs != null}" th:replace="~{fragments/navigation :: breadcrumb-navigation(${breadcrumbs})}"></div>
            
            <!-- 错误消息 -->
            <div th:if="${error != null}" class="alert alert-error mb-3">
                <span th:text="${error}">错误消息</span>
            </div>
            
            <!-- 成功消息 -->
            <div th:if="${message != null}" class="alert alert-success mb-3">
                <span th:text="${message}">成功消息</span>
            </div>
            
            <!-- 页面内容 -->
            <div class="content" th:insert="${content}">
                页面内容将在此处显示
            </div>
        </div>
    </main>

    <!-- 页脚 -->
    <footer class="footer" th:fragment="footer">
        <div class="container">
            <div class="text-center text-muted text-small">
                © 2024 AI Reviewer. Powered by Spring Boot & Thymeleaf.
            </div>
        </div>
    </footer>
    
    <!-- 加载指示器 -->
    <div id="loading-indicator" class="loading" style="display: none; position: fixed; top: 20px; right: 20px; z-index: 9999;">
        <div class="spinner"></div>
        <span>加载中...</span>
    </div>
    
    <!-- 导航相关脚本 -->
    <div th:replace="~{fragments/navigation :: navigation-scripts}"></div>
</body>
</html>
